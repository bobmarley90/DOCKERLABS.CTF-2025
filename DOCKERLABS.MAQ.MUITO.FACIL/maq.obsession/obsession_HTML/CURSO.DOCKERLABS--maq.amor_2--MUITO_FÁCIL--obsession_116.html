<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>obsession</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>obsession</h1><br/><p></p><p><strong><h1>Obsession , DockerLabs</h1></strong></p><p></p><p><img src="images/116-1.png" alt="images/116-1.png" /></p><p></p><p><strong><span style="color:#c061cb;">Para utilizar esta máquina devemos primeiro baixar os arquivos e assim implantá-la com Docker.</span></strong><strong><span style="color:#c061cb;"></span></strong></p><p><strong><span style="color:#c061cb;">  </span></strong><strong><span style="color:#c061cb;"></span></strong></p><p><strong><span style="color:#c061cb;">Baixamos o arquivo da página</span></strong> <a href="https://dockerlabs.es/">https://dockerlabs.es/</a></p><p></p><p><strong><span style="color:#c061cb;">Para implantar o laboratório executamos da seguinte forma, para que também possamos ver que ele nos diz a direção que teremos, bem como o que fazer quando terminarmos.</span></strong></p><p></p><p><img src="images/116-2.png" alt="images/116-2.png" /></p><p></p><p><strong><span style="color:#c061cb;">COLETA DE INFORMAÇÕES </span></strong></p><p></p><p><span style="color:#ff7800;">nmap 172.17.0.2 -sS -sV -sC  --open -p- -T5 -n -Pn          </span>                      </p><p>                                                        </p><p><strong><span style="color:#c061cb;">Verificando as portas podemos ver que temos duas postas abertas  21... 22...e a 80.  </span></strong> </p><p></p><p>21/tcp open  ftp     vsftpd 3.0.5</p><p><ol><li>1. <h3>1. </h3><h3>Explorando o FTP (Porta 21)</h3></li></ol></p><p><strong><span style="color:#c061cb;">O FTP (vsftpd 3.0.5) está com login anônimo habilitado, o que significa que você pode se conectar sem fornecer credenciais. Siga estas etapas</span></strong></p><p></p><p><img src="images/116-3.png" alt="images/116-3.png" /></p><p></p><p><strong><span style="color:#c061cb;">baixar esses arquivo para maquina atacante, usando</span></strong><strong><span style="color:#ff7800;"> get </span></strong></p><p></p><p><img src="images/116-4.png" alt="images/116-4.png" /></p><p></p><p><strong><span style="color:#c061cb;">vamos usar o</span></strong> <strong><span style="color:#ff7800;">hydra</span></strong><span style="color:#ff7800;"> </span><strong><span style="color:#c061cb;">para fazer  um ataque de força bruta nos usuário</span></strong>: <strong><span style="color:#ff7800;">russoski</span></strong> e <strong><span style="color:#ff7800;">gonza</span></strong>.</p><p> </p><p><img src="images/116-5.png" alt="images/116-5.png" /></p><p></p><p><strong><span style="color:#c061cb;">usuário e senha do </span></strong><span style="color:#ff7800;">ssh</span><strong><span style="color:#c061cb;"> quebrada com sucesso</span></strong>.</p><p></p><p><strong><span style="color:#ff7800;">ssh russoski@172.17.0.2</span></strong></p><p></p><p><img src="images/116-6.png" alt="images/116-6.png" /></p><p></p><p><strong><span style="color:#c061cb;">uma outra opção para conseguir o usuário e senha do ssh.</span></strong><strong><span style="color:#c061cb;"></span></strong></p><p><strong><span style="color:#c061cb;"> é explorar o navegador e buscar pastas ocultas com gobuster</span></strong>.</p><p> </p><p> entre no navegador <a href="http://172.17.0.2/">http://172.17.0.2/</a></p><p> </p><p> <img src="images/116-7.png" alt="images/116-7.png" /></p><p> </p><p><strong><span style="color:#c061cb;"> vamos usar o</span></strong> <strong><span style="color:#ff7800;">gobuster</span></strong> <strong><span style="color:#c061cb;">para procurar pastas ocultas</span></strong>.</p><p> </p><p> <span style="color:#ff7800;">gobuster dir -u</span><strong><span style="color:#c061cb;"> </span></strong><a href="http://172.17.0.2">http://172.17.0.2</a> <strong><span style="color:#ff7800;">-w /usr/share/wordlists/dirb/common.txt -x txt,php,html</span></strong></p><p> </p><p> <img src="images/116-8.png" alt="images/116-8.png" /></p><p><a href="http://172.17.0.2/backup/backup.txt">http://172.17.0.2/backup/backup.txt</a></p><p></p><p><img src="images/116-9.png" alt="images/116-9.png" /></p><p></p><p><strong><span style="color:#c061cb;">agora usar o hydra que nem no exemplo acima</span></strong></p><p></p><p></p><p><strong><h3>★ </h3></strong><h3>Fase de Exploração</h3><strong><h3> ★</h3></strong></p><p></p><p></p><p><img src="images/116-10.png" alt="images/116-10.png" /></p><p></p><p><strong><span style="color:#c061cb;">usuário e senha do </span></strong><span style="color:#ff7800;">ssh</span><strong><span style="color:#c061cb;"> quebrada com sucesso</span></strong>.</p><p></p><p><strong><span style="color:#ff7800;">ssh russoski@172.17.0.2</span></strong></p><p><img src="images/116-11.png" alt="images/116-11.png" /></p><p></p><p></p><p><h3>★ </h3><strong><h3>Fase de escalonamento de privilégios</h3></strong><h3> ★</h3></p><p>     </p><p><strong><h3>Método 1</h3></strong></p><p></p><p>se executarmos o comando &quot; <strong>sudo -l</strong> &quot; podemos ver que o usuĂˇrio &quot;russoski&quot; pode executar a ferramenta Vim com permissĂµes elevadas e sem a necessidade de senha.</p><p></p><p><a href="https://gtfobins.github.io/gtfobins/vim/#sudo">https://gtfobins.github.io/gtfobins/vim/#sudo</a></p><p></p><p><img src="images/116-12.png" alt="images/116-12.png" /></p><p></p><p><img src="images/116-13.png" alt="images/116-13.png" /></p><p></p><p><strong><span style="color:#c061cb;">somos root</span></strong><strong><span style="color:#c061cb;"></span></strong></p><p><strong><span style="color:#c061cb;"> </span></strong></p><p>***********************************************************************************************************************</p><p></p><p><strong><h3>Método 2</h3></strong></p><p></p><p>     Para esta ocasião, tentaremos executar o comando <span style="color:#ff7800;">&quot; find / -perm -4000 2&gt;/dev/null  &quot;</span>, que o que faz é procurar todos os binários SUID que estão instalados  no computador. Vemos os resultados a seguir e observamos que o binário  Env está instalado, o que geralmente fica vulnerável se não estiver  configurado corretamente.</p><p>     </p><p><img src="images/116-14.png" alt="images/116-14.png" /></p><p></p><p><img src="images/116-15.png" alt="images/116-15.png" /></p><p></p><p><strong><span style="color:#c061cb;">Prosseguimos com a execução do comando recomendado, mas especificando o caminho absoluto do binário e não o relativo. Funciona.</span></strong></p><p></p><p><img src="images/116-16.png" alt="images/116-16.png" /></p><p></p><p><strong><span style="color:#c061cb;">novamente somos root</span></strong></p><p></p><p>************************************************************************************************************************</p><p></p><p><strong><span style="color:#ff7800;">método 3</span></strong></p><p></p><p><strong><span style="color:#c061cb;">Por  fim, se fizermos uma busca intensa nos diretórios e caminhos do  computador, acabaremos encontrando um arquivo oculto. Isso é encontrado  acessando a rota onde o serviço Web na porta 80 está hospedado  (/var/www/html). Se formos ao diretório Importante e listarmos os  arquivos ocultos com </span></strong>&quot; <strong>ls -la</strong> &quot;, <strong><span style="color:#c061cb;">encontraremos o arquivo</span></strong> <strong><span style="color:#ff7800;">.root-passwd.txt</span></strong>.</p><p></p><p> <strong><span style="color:#c061cb;">Se visualizarmos seu conteúdo, encontraremos a senha do root, mas ela está com hash</span></strong>.</p><p> </p><p> <img src="images/116-17.png" alt="images/116-17.png" /></p><p></p><p><strong><span style="color:#c061cb;">Como não sabemos em que formato a senha está criptografada, </span></strong><strong><span style="color:#c061cb;"></span></strong></p><p><strong><span style="color:#c061cb;">é melhor ir ao </span></strong><strong><a href="https://crackstation.net/">https://crackstation.net/</a></strong><strong><span style="color:#c061cb;"> para descobrir e tentar quebrá-la</span></strong>. </p><p></p><p><img src="images/116-18.png" alt="images/116-18.png" /></p><p></p><p><img src="images/116-19.png" alt="images/116-19.png" /></p><p></p><p><h3>★ </h3><strong><h3>Fase Pós-Exploração</h3></strong><h3> ★</h3></p><p></p><p> <strong><span style="color:#c061cb;">Uma  vez que a máquina esteja 100% comprometida, basta proceder à busca de  quais arquivos ou conteúdos nos interessam. Indo para a pasta do usuário  root encontramos um arquivo chamado Video-Nagore-Fernandez.txt, que  contém o link para um vídeo do YouTube.</span></strong></p><p></p><p><img src="images/116-20.png" alt="images/116-20.png" /></p><p></p><p><strong><span style="color:#c061cb;">somos root</span></strong></p><p></p><p><strong><span style="color:#ff7800;">OBS</span></strong>:  <strong><span style="color:#c061cb;">antes de clicar em qualquer link ou baixar um arquivo,</span></strong></p><p> <strong><span style="color:#c061cb;">verifique no site</span></strong> <a href="https://www.virustotal.com/gui/home/upload">https://www.virustotal.com/gui/home/upload</a> <strong><span style="color:#c061cb;">para ver se o arquivo é seguro</span></strong>.</p><p></p><p><strong><span style="color:#ff0000;text-decoration:line-through;">bobmarley</span></strong></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
</body>
</html>
