<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>maq.los40ladrones</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>maq.los40ladrones</h1><br/><p></p><p><strong><span style="color:#ff0000;">MÁQUINA  LOS 40 LADRONES</span></strong></p><p></p><p><img src="images/165-1.png" alt="images/165-1.png" /></p><p></p><p><strong>Para utilizar esta máquina devemos primeiro baixar os arquivos e assim implantá-la com Docker.</strong><strong></strong></p><p><strong>  </strong><strong></strong></p><p><strong>Baixamos o arquivo da página </strong><strong><a href="https://dockerlabs.es/">https://dockerlabs.es/</a></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>Para implantar o laboratório executamos da seguinte forma, para que também possamos ver que ele nos diz a direção que teremos, bem como o que fazer quando terminarmos.</strong></p><p></p><p></p><p></p><p><strong><span style="color:#ff0000;">COLETA DE INFORMAÇÕES </span></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><strong><span style="color:#ff7800;">nmap 172.17.0.2 -A -sS -sV -sC  --open -p- -T5  -Pn    </span></strong><strong><span style="color:#ff7800;"></span></strong></p><p><strong><span style="color:#ff7800;"></span></strong></p><p><img src="images/165-2.png" alt="images/165-2.png" /></p><p></p><p>Temos a porta 80 aberta.     </p><p><strong><span style="color:#ff7800;">80/tcp open  http    Apache httpd 2.4.52</span></strong></p><p></p><p><strong>Agora vamos explorar a porta 80 no navegador colocando o ip da máquina </strong><strong><a href="http://172.17.0.2/">http://172.17.0.2/</a></strong> .</p><p></p><p><strong>não temos achamos nada na porta na varredura.</strong></p><p></p><p><img src="images/165-3.png" alt="images/165-3.png" /></p><p></p><p><strong>Vamos fazer um </strong><strong><span style="color:#ff7800;">fuzzing </span></strong><strong>para ver se tem pastas ocultas, com a ferramenta </strong><strong><span style="color:#ff7800;">gobuster</span></strong><strong>.</strong></p><p></p><p><strong><span style="color:#ff7800;">gobuster dir -u </span></strong><strong><a href="http://172.17.0.3">http://172.17.0.3</a></strong><strong><span style="color:#ff7800;"> -w /usr/share/seclists/Discovery/Web-Content/directory-list-lowercase-2.3-medium.txt -x .txt,.php,.html,.py</span></strong></p><p></p><p><img src="images/165-4.png" alt="images/165-4.png" /></p><p></p><p><strong>vamos explorar o arquivo </strong><strong><span style="color:#ff7800;">/qdefense.txt</span></strong><strong> que achamos com gobuster. </strong><strong><a href="http://172.17.0.2/qdefense.txt">http://172.17.0.2/qdefense.txt</a></strong> .</p><p></p><p><strong>Testo da imagem abaixo, Tradução em português:</strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>“Lembre-se de ligar antes de entrar, não seja como o rude toctoc 7.000 8.000 9.000 pesquise e ligue +54 2933574639”</strong></p><p></p><p><img src="images/165-5.png" alt="images/165-5.png" /></p><p></p><p><strong>Vamos rodar o </strong><strong><span style="color:#ff7800;">nmap </span></strong><strong>nas porta 7.000...8.000... e 9.000. Lembrando que essas porta e o um possível usuário </strong><strong><span style="color:#ff7800;">toctoc</span></strong><strong> estao especificos na imagem acima.</strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><img src="images/165-6.png" alt="images/165-6.png" /></p><p></p><p>Parece que temos o nome <span style="color:#ff7800;">toctoc </span>de um possível usuário, bastante rude com a visão. Além disso, temos uma sequência de números e o conteúdo do arquivo refere-se a bater na porta. Existe uma técnica chamada <span style="color:#ff7800;">Port Knocking</span> que permite manter certas portas fechadas ou ocultas sendo impossíveis de acessá-las sem tentar conectar-se a portas específicas em uma ordem marcada. Após esta sequência, veríamos a porta aberta e poderíamos acessá-la. Se pensarmos sobre isso, é muito semelhante ao mecanismo da fechadura de um cofre, para que seja melhor compreendido.</p><p></p><p><span style="color:#ff7800;">knock -v 172.17.0.2 7000 8000 9000 </span></p><p></p><p>Esse comando utiliza a ferramenta <span style="color:#ff7800;">knock</span> para realizar uma sequência de <span style="color:#ff7800;">&quot;knocks&quot;</span> (tentativas de conexão) em uma máquina-alvo, geralmente com o objetivo de desbloquear uma porta de serviço usando a técnica de &quot;port knocking&quot;. O comando em si realiza uma tentativa de conexão em uma série de portas específicas.</p><p></p><p><img src="images/165-7.png" alt="images/165-7.png" /></p><p></p><p>Se esta chamada funcionou corretamente, devemos ver alguma nova porta acessível ao fazer uma verificação com o Nmap.</p><p></p><p><span style="color:#ff7800;">nmap 172.17.0.2 -A -sS -sV -sC -Pn -T5 </span></p><p></p><p><img src="images/165-8.png" alt="images/165-8.png" /></p><p></p><p><strong>Vamos usar o </strong><strong><span style="color:#ff7800;">hydra</span></strong><strong> para quebrar a senha do possível usuário </strong><strong><span style="color:#ff7800;">toctoc</span></strong><strong>.</strong></p><p></p><p><strong><span style="color:#ff7800;">hydra -l toctoc -P /usr/share/wordlists/rockyou.txt ssh://172.17.0.2:22 -t 4</span></strong></p><p></p><p><img src="images/165-9.png" alt="images/165-9.png" /></p><p></p><p><strong>Vamos nos conectar no </strong><strong><span style="color:#ff7800;">ssh</span></strong><strong>:</strong></p><p></p><p><strong><span style="color:#ff7800;"> ssh</span></strong><span style="color:#ff7800;"> </span><strong><span style="color:#ff7800;">toctoc@172.17.0.2</span></strong></p><p></p><p><img src="images/165-10.png" alt="images/165-10.png" /></p><p></p><p><strong>Uma vez que escrevemos o comando </strong><strong><span style="color:#ff7800;">sudo -l</span></strong><strong>, vemos que podemos executar </strong><em><strong><span style="color:#ff7800;">/opt/bash </span></strong></em><em><strong>como </strong></em><em><strong><span style="color:#ff7800;">sudo</span></strong></em><strong>.</strong></p><p></p><p><img src="images/165-11.png" alt="images/165-11.png" /></p><p></p><p><strong><span style="color:#ff7800;">sudo /opt/bash</span></strong></p><p></p><p><img src="images/165-12.png" alt="images/165-12.png" /></p><p></p><p><strong><span style="color:#ff7800;">somos root</span></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><strong><span style="color:#ff0000;text-decoration:line-through;">bobmarley</span></strong></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
</body>
</html>
