<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>maq.aguademayo</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>maq.aguademayo</h1><br/><p></p><p><strong><h1>DockerLabs ÁguaDeMaio</h1></strong></p><p></p><p><img src="images/117-1.png" alt="images/117-1.png" /></p><p></p><p><strong>Para utilizar esta máquina devemos primeiro baixar os arquivos e assim implantá-la com Docker.</strong><strong></strong></p><p><strong>  </strong><strong></strong></p><p><strong>Baixamos o arquivo da página </strong><strong><a href="https://dockerlabs.es/">https://dockerlabs.es/</a></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>Para implantar o laboratório executamos da seguinte forma, para que também possamos ver que ele nos diz a direção que teremos, bem como o que fazer quando terminarmos.</strong></p><p></p><p><img src="images/117-2.png" alt="images/117-2.png" /></p><p></p><p><strong><span style="color:#ff0000;">COLETA DE INFORMAÇÕES </span></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><strong><span style="color:#ff7800;">nmap 172.17.0.2 -A -sS -sV -sC  -Pn -T5  -P-   </span></strong></p><p></p><p><img src="images/117-3.png" alt="images/117-3.png" /></p><p></p><p><strong>Como podemos ver só temos 2 portas abertas: </strong></p><p></p><p><strong><span style="color:#ff7800;">22/tcp open  ssh     OpenSSH 9.2p1 Debian</span></strong><strong><span style="color:#ff7800;"></span></strong></p><p><strong><span style="color:#ff7800;">80/tcp open  http    Apache httpd 2.4.59</span></strong></p><p></p><p><strong>Nós vamos para o endereço </strong><strong><a href="http://172.17.0.2/">http://172.17.0.2/</a></strong><strong> do navegador e podemos ver que só temos a página padrão de apache.</strong></p><p></p><p><img src="images/117-4.png" alt="images/117-4.png" /></p><p></p><p></p><p><strong>Vamos fazer um </strong><strong><span style="color:#ff7800;">fuzzing </span></strong><strong>para ver se tem pastas ocultas, com a ferramenta </strong><strong><span style="color:#ff7800;">gobuster</span></strong><strong>.</strong></p><p></p><p><strong><span style="color:#ff7800;">gobuster dir -u </span></strong><strong><a href="http://172.17.0.2">http://172.17.0.2</a></strong><strong><span style="color:#ff7800;"> -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -x .txt,.php,.py,.html</span></strong></p><p></p><p><strong>Fazemos uma varredura de subdiretório e podemos ver que encontramos a pasta,  </strong><strong><code>images</code></strong><strong>que geralmente não existe quando você tem apenas o servidor padrão.</strong></p><p></p><p><img src="images/117-5.png" alt="images/117-5.png" /></p><p></p><p><strong>Vamos navegar no diretório /imagem : </strong><strong><a href="http://172.17.0.2/images/">http://172.17.0.2/images/</a></strong></p><p></p><p><strong>Quando vamos para o diretório, podemos ver que há apenas uma imagem com o nome água.</strong></p><p></p><p><strong>Vamos guarda esse nome </strong><strong><span style="color:#ff7800;">agua</span></strong><strong>, porque pode ser um possível usuário.</strong></p><p></p><p><img src="images/117-6.png" alt="images/117-6.png" /></p><p></p><p><strong>Vamos salvar a imagem para ver se tem algum metadados.</strong></p><p></p><p><img src="images/117-7.png" alt="images/117-7.png" /></p><p></p><p><strong><span style="color:#ff7800;">exiftool agua_ssh.jpg</span></strong></p><p></p><p><img src="images/117-8.png" alt="images/117-8.png" /></p><p></p><p><strong>Verificamos a imagem pensando que há algumas informações interessantes, mas não encontramos algo que pudesse nos servir.</strong></p><p></p><p><strong>Vamos ver o código fonte da página: </strong><strong><a href="http://172.17.0.2/">http://172.17.0.2/</a></strong></p><p></p><p><img src="images/117-9.png" alt="images/117-9.png" /></p><p></p><p><strong>Vamos jogar esse código no chatgpt.</strong></p><p></p><p><strong>E veja temos uma possível senha: </strong><strong><span style="color:#ff7800;">bebeaguaqueessano</span></strong></p><p></p><p><img src="images/117-10.png" alt="images/117-10.png" /></p><p></p><p><strong>Temos o que seria uma senha, mas agora não temos nome. Revisando as  coisas que temos até agora, veja que temos a imagem, que tem um nome  atraente.  </strong><strong><code>agua_ssh.jpg</code></strong><strong> Com esta suposição, tentaremos nos conectar através do ssh.</strong><strong></strong></p><p><strong>Entramos nas credenciais e observamos que elas estão corretas e já estamos dentro como usuário de água.</strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>Vamos entrar no ssh com possível usuário e a senha:</strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>usuário: </strong><strong><span style="color:#ff7800;">agua</span></strong><strong></strong></p><p><strong>senha: </strong><strong><span style="color:#ff7800;">bebeaguaqueessano</span></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><strong><span style="color:#ff7800;">ssh agua@172.17.0.2</span></strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong>Conseguimos entrar no ssh usuário agua.</strong><strong></strong></p><p><strong></strong><strong></strong></p><p><strong></strong><img src="images/117-11.png" alt="images/117-11.png" /></p><p></p><p>Uma vez dentro, devemos escalar privilégios, pois que primeiro fazemos uma  <code>ls</code> e podemos ver um arquivo alpino e, em seguida, fazer um  <code>sudo -l</code>Notamos que o usuário tem a capacidade de executar um binário como root.</p><p></p><p><img src="images/117-12.png" alt="images/117-12.png" /></p><p></p><p>sudo /usr/bin/bettercap</p><p></p><p>Vamos executar ajuda para ver quais comandos podemos fazer e ver isso:</p><p></p><p><img src="images/117-13.png" alt="images/117-13.png" /></p><p></p><p></p><p><img src="images/117-14.png" alt="images/117-14.png" /></p><p></p><p><img src="images/117-15.png" alt="images/117-15.png" /></p><p></p><p><img src="images/117-16.png" alt="images/117-16.png" /></p><p></p><p><img src="images/117-17.png" alt="images/117-17.png" /></p><p></p><p><span style="color:#ff7800;">somos root</span></p><p></p><p><span style="color:#ff0000;text-decoration:line-through;">R10</span></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
</body>
</html>
